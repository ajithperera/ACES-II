      SUBROUTINE DBG_CORR_DENS(DENS, SCRN, SCR1, SCR2, 
     &                         LDIM1, NBAS, NBASX, IUHF)

      IMPLICIT DOUBLE PRECISION(A-H, O-Z)
C
#include "machsp.com"
#include "symm2.com"
C
      DIMENSION DENS((IUHF+1)*LDIM1), SCR1(NBAS,NBAS),
     &          SCRN(NBAS,NBAS), SCR2(NBAS,NBAS)
C
      CALL ZERO(DENS, (IUHF+1)*LDIM1)
      CALL GETREC(20,'JOBARC','RELDENSA',NBAS*NBAS*IINTFP,SCRN)
      CALL GETREC(20,'JOBARC','SCFEVECA',NBAS*NBAS*IINTFP,SCR1)
      CALL XGEMM("N", "N", NBAS, NBAS, NBAS, 1.0D0, SCR1, NBAS,
     &            SCRN, NBAS, 0.0D0, SCR2, NBAS)
      CALL XGEMM("N", "T", NBAS, NBAS, NBAS, 1.0D0, SCR2, NBAS,
     &            SCR2, NBAS, 0.0D0, SCRN, NBAS)
C
      DO I=1,NIRREP
          CALL SQUEZ2(SCRN,DENS(ITRIOF(I)),NBFIRR(I))
      ENDDO
C
      IF (IUHF.EQ.1) THEN
         CALL GETREC(20,'JOBARC','RELDENSB',NBAS*NBAS*IINTFP,SCRN)
         CALL GETREC(20,'JOBARC','SCFEVECB',NBAS*NBAS*IINTFP,SCR1)
         CALL XGEMM("N", "N", NBAS, NBAS, NBAS, 1.0D0, SCR1, NBAS,
     &            SCRN, NBAS, 0.0D0, SCR2, NBAS)
         CALL XGEMM("N", "T", NBAS, NBAS, NBAS, 1.0D0, SCR2, NBAS,
     &            SCR1, NBAS, 0.0D0, SCRN, NBAS)
C
         IOFF = 1
         DO I=1,NIRREP
            CALL SQUEZ2(SCRN,DENS(LDIM1+ITRIOF(I)),NBFIRR(I))
         ENDDO  
C
      ENDIF

      RETURN
      END
